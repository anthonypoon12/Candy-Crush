public class CandyCrushWorld extends ActorWorld //ActorWorld edited by Chew
{ 
  public void fillWorld()//needs to detect for combos
  {
    Grid<Actor> gr = getGrid();
    int rows = gr.getNumRows();
    int cols = gr.getNumCols();
    if (rows > 0 && cols > 0) // bounded grid
    {
      // get all valid empty locations (Copied from World.java in the getRandomEmptyLocation())
      ArrayList<Location> emptyLocs = new ArrayList<Location>();
      for (int i = 0; i < rows; i++)
          for (int j = 0; j < cols; j++)
          {
              Location loc = new Location(i, j);
              if (gr.isValid(loc) && gr.get(loc) == null)
                  emptyLocs.add(loc);
          }
        for (Location emptyloc: emptyLocs)
        {
          add(emptyloc, randomCandy());
        }
        ArrayList<Location> allLocs = new ArrayList<Location>(); //from here down is new
        for (int i = 0; i < rows; i++)
            for (int j = 0; j < cols; j++)
            {
                Location loc = new Location(i, j);
                if (gr.isValid(loc))
                {
                  allLocs.add(loc);
                  if (gr.get(loc) instanceof Candy)
                  {
                  Candy candy = (Candy)gr.get(loc);
                  gridDetect(candy);
                }
                }
            }
    }
  }
  public void gridDetect(Candy candy)
  {
    ArrayList<Location> combolist;
    ArrayList<Location> combolist2;
    combolist = candy.detect();
    if (combolist.size()>=3)
    {
      candy.destroy(combolist);
    }
  }
  }
